<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="kopo.poly.persistance.mapper.IUserInfoMapper">

	<!-- 회원가입하기(회원정보 등록하기) -->
	<insert id="insertUserInfo" parameterType="UserInfoDTO">
		INSERT INTO USER_INFO
			(
			 	USER_EMAIL,
			 	USER_NAME,
			 	PASSWORD,
			 	AGE,
			 	SEX
			)
			VALUES(
				   #{user_email},
				   #{user_name},
				   #{password},
				   #{age},
				   #{sex}
				  )
	</insert>

	<!-- 이메일로 회원 가입 중복 방지하기 -->
	<select id="getUserExists" parameterType="UserInfoDTO" resultType="UserInfoDTO">
		SELECT (CASE WHEN COUNT(1) THEN 'Y' ELSE 'N' END )AS EXISTS_YN
			FROM USER_INFO
		WHERE USER_EMAIL = #{user_email}
	</select>

	<!---회원가입 로그인하기  -->
	<select  id="getUserLoginCheck"  parameterType="UserInfoDTO" resultType="UserInfoDTO">
		SELECT USER_EMAIL
			FROM USER_INFO WHERE USER_EMAIL = #{user_email} AND PASSWORD = #{password}
			</select>
	<!--사용자 아이디찾기-->
	<select id="findUserId" parameterType="UserInfoDTO"
			resultType="UserInfoDTO">
		SELECT USER_NAME
		FROM USER_INFO
		WHERE EMAIL=#{email} AND USER_NAME= #{user_name}
	</select>

</mapper>